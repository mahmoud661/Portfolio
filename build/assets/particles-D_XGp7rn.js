import{j as e,c as t}from"./index-BNXbxCoW.js";import{R as r,r as n}from"./react-vendor-BKfAGeUj.js";const a=r.memo((({className:r="",quantity:a=100,staticity:s=50,ease:c=50,particleSize:u=.4,refresh:i=!1,vx:o=0,vy:l=0})=>{const d=n.useRef(null),h=n.useRef(null),f=n.useRef(null),m=n.useRef([]),w=function(){const[e,t]=n.useState({x:0,y:0});return n.useEffect((()=>{const e=e=>{t({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)}),[]),e}(),x=n.useRef({x:0,y:0}),p=n.useRef({w:0,h:0}),y="undefined"!=typeof window?window.devicePixelRatio:1,g=n.useRef(null),[v,z]=n.useState("light");n.useEffect((()=>{const e=document.documentElement.classList.contains("dark");z(e?"dark":"light");const t=new MutationObserver((e=>{e.forEach((e=>{if("class"===e.attributeName){const e=document.documentElement.classList.contains("dark");z(e?"dark":"light")}}))}));return t.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()}),[]),n.useEffect((()=>(d.current&&(f.current=d.current.getContext("2d")),E(),A(),window.addEventListener("resize",E),()=>{null!=g.current&&window.cancelAnimationFrame(g.current),window.removeEventListener("resize",E)})),[v]),n.useEffect((()=>{M()}),[w.x,w.y]),n.useEffect((()=>{E()}),[i]);const E=()=>{R(),Y()},M=()=>{if(d.current){const e=d.current.getBoundingClientRect(),{w:t,h:r}=p.current,n=w.x-e.left-t/2,a=w.y-e.top-r/2;n<t/2&&n>-t/2&&a<r/2&&a>-r/2&&(x.current.x=n,x.current.y=a)}},R=()=>{h.current&&d.current&&f.current&&(m.current.length=0,p.current.w=h.current.offsetWidth,p.current.h=h.current.offsetHeight,d.current.width=p.current.w*y,d.current.height=p.current.h*y,d.current.style.width=`${p.current.w}px`,d.current.style.height=`${p.current.h}px`,f.current.scale(y,y))},b=()=>({x:Math.floor(Math.random()*p.current.w),y:Math.floor(Math.random()*p.current.h),translateX:0,translateY:0,size:Math.floor(2*Math.random())+u,alpha:0,targetAlpha:parseFloat((.6*Math.random()+.1).toFixed(1)),dx:.1*(Math.random()-.5),dy:.1*(Math.random()-.5),magnetism:.1+4*Math.random()}),F=(e,t=!1)=>{if(f.current){const{x:r,y:n,translateX:a,translateY:s,size:c,alpha:u}=e;f.current.translate(a,s),f.current.beginPath(),f.current.arc(r,n,c,0,2*Math.PI),f.current.fillStyle=`rgba(${"dark"===v?"255, 255, 255":"0, 0, 0"}, ${u})`,f.current.fill(),f.current.setTransform(y,0,0,y,0,0),t||m.current.push(e)}},X=()=>{f.current&&f.current.clearRect(0,0,p.current.w,p.current.h)},Y=()=>{X();const e=window.innerWidth<768?Math.floor(.5*a):a;for(let t=0;t<e;t++){const e=b();F(e)}},A=()=>{X(),m.current.forEach(((e,t)=>{const r=[e.x+e.translateX-e.size,p.current.w-e.x-e.translateX-e.size,e.y+e.translateY-e.size,p.current.h-e.y-e.translateY-e.size].reduce(((e,t)=>Math.min(e,t))),n=parseFloat(((e,t,r,n,a)=>{const s=(e-t)*(a-n)/(r-t)+n;return s>0?s:0})(r,0,20,0,1).toFixed(2));if(n>1?(e.alpha+=.02,e.alpha>e.targetAlpha&&(e.alpha=e.targetAlpha)):e.alpha=e.targetAlpha*n,e.x+=e.dx+o,e.y+=e.dy+l,e.translateX+=(x.current.x/(s/e.magnetism)-e.translateX)/c,e.translateY+=(x.current.y/(s/e.magnetism)-e.translateY)/c,F(e,!0),e.x<-e.size||e.x>p.current.w+e.size||e.y<-e.size||e.y>p.current.h+e.size){m.current.splice(t,1);const e=b();F(e)}})),g.current=requestAnimationFrame(A)};return e.jsx("div",{className:t("pointer-events-none fixed inset-0",r),ref:h,"aria-hidden":"true",children:e.jsx("canvas",{ref:d,className:"size-full"})})}));export{a as P};
